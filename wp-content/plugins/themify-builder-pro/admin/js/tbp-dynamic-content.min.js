var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,k,c){a!=Array.prototype&&a!=Object.prototype&&(a[k]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var k=0;return $jscomp.iteratorPrototype(function(){return k<a.length?{done:!1,value:a[k++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,k){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var c=0,h={next:function(){if(c<a.length){var p=c++;return{value:k(p,a[p]),done:!1}}h.next=function(){return{done:!0,value:void 0}};return h.next()}};h[Symbol.iterator]=function(){return h};return h};
$jscomp.polyfill=function(a,k,c,h){if(k){c=$jscomp.global;a=a.split(".");for(h=0;h<a.length-1;h++){var p=a[h];p in c||(c[p]={});c=c[p]}a=a[a.length-1];h=c[a];k=k(h);k!=h&&null!=k&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:k})}};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6-impl","es3");
$jscomp.polyfill("Array.prototype.values",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a,c){return c})}},"es6","es3");$jscomp.owns=function(a,k){return Object.prototype.hasOwnProperty.call(a,k)};$jscomp.polyfill("Object.values",function(a){return a?a:function(a){var c=[],h;for(h in a)$jscomp.owns(a,h)&&c.push(a[h]);return c}},"es8","es3");
(function(a,k){var c={},h=null,p={},v=tbpDynamic.field_name,q;tbpDynamic.field_name=null;var w=function(d){if(null===h){var c=Themify.hash(tbpDynamic.v+Object.keys(tbpDynamic.items));h=function(){if(themifyBuilder.debug)return null;try{var b=sessionStorage.getItem("tbp_dc");if(b&&(b=JSON.parse(b),b.h===c&&b.v))return b.v}catch(e){}return null}();null===h&&a.ajax({type:"POST",url:themifyBuilder.ajaxurl,dataType:"json",data:{action:"tpb_get_dynamic_content_fields",tb_load_nonce:themifyBuilder.tb_load_nonce},
error:function(){h=null},success:function(b){h=b;try{sessionStorage.setItem("tbp_dc",JSON.stringify({v:b,h:c}))}catch(e){}d&&d()}})}else d&&d()},B=function(d,c){var b="",e="",n=function(d){void 0!==e&&(d=e+d);void 0!==b&&(d+=b);c&&c(d)};if("string"!==typeof d){if(!d||void 0===d.item)return;var f=a.extend(!0,{},d);b=f.text_after;e=f.text_before;delete f.text_before;delete f.text_after;delete f.o;f=JSON.stringify(f)}else f=d;var g=Themify.hash(f+themifyBuilder.post_ID);void 0===p[g]?a.ajax({type:"POST",
url:themifyBuilder.ajaxurl,dataType:"json",data:{action:"tpb_get_dynamic_content_preview",tb_load_nonce:themifyBuilder.tb_load_nonce,pid:themifyBuilder.post_ID,values:f},success:function(b){p[g]=b.error?b.error:""===b.value||"false"===b.value?null:b.value;n(p[g])}}):n(p[g])},C=function(d,c){var b=ThemifyConstructor.values,e=document.createElement("div"),n=Object.values(a.extend(!0,{},h)),f=tbpDynamic.items;e.className="tbp_dynamic_content_options";for(var g=n.length-1;-1<g;--g)if("item"===n[g].id){var g=
n[g].options,l;for(l in g){for(var m in g[l].options)void 0!==f[m]&&-1===f[m].type.indexOf(d)&&delete g[l].options[m];0===Object.keys(g[l].options).length&&delete g[l]}break}void 0===c&&(c={});ThemifyConstructor.values=c;n=ThemifyConstructor.create(n);f=n.querySelectorAll(".tb_lb_option");for(g=f.length-1;-1<g;--g)f[g].classList.remove("tb_lb_option"),f[g].classList.remove("tb_lb_option_child");ThemifyConstructor.values=b;e.appendChild(n);return e},A=function(d,g){var b=d.parentNode.closest(".tb_field"),
e=t(b),n=D(b),f=b.getElementsByClassName("tb_input")[0],h={};void 0!==f&&f.parentNode.classList.contains("tb_has_dc")&&(b=f,f=null);var l=E(b,n);null!==e?void 0!==c[e]&&(f=u(b),void 0!==c[e][f]&&(h=c[e][f])):h=c;if(!0===g)if(void 0!==h[l])d.checked=!0;else return;if(!0===d.checked){b.classList.add("tbp_dc_active");var m=b.getElementsByClassName("tbp_dc_input")[0];void 0===m?(w(function(){var d=document.createElement("div");m=document.createElement("input");d.className="tbp_dc_wrap";m.className="tbp_dc_input xlarge";
m.type="text";void 0!==h[l]&&(m.value=h[l].item);m.setAttribute("readonly",!0);var c=function(b){b=b.closest(".tbp_dc_wrap");var d=b.querySelector("#item"),c=d.value,e=d.closest(".tb_field").nextElementSibling.children,g="field_"+c,a=[],f="field_general_"+n;m.value=d.options[d.selectedIndex].text;a.push(d.parentNode);for(var h=e.length-1;-1<h;--h)""!==c&&(e[h].classList.contains(g)||e[h].classList.contains(f))?(e[h].style.display="block",a.push(e[h])):e[h].style.display="";ThemifyConstructor.callbacks();
c||(a=null);var k=x(l,a,b),a=null;B(k,function(b){null===b&&(b="image"===n?tbpDynamic.placeholder_image:"{"+k.item+"}");var c=r(d,l);if(null!==c){c.value=b;var e=null;"wp_editor"===n&&(e=tinymce.get(c.id))&&(e.setContent(String(b)),e.fire("change"));e||(Themify.triggerEvent(c,"change"),"image"!==n&&"SELECT"!==c.nodeName&&Themify.triggerEvent(c,"keyup"))}})};m.addEventListener("click",function(b){b.preventDefault();b.stopImmediatePropagation();var d=this.nextElementSibling;null===d&&(d=C(n,h[l]),a(d).on("change.dc_preview",
":input",function(b){b.stopPropagation();c(b.target)}),this.parentNode.appendChild(d));b="block"!==d.style.display;for(var e=ThemifyBuilderCommon.Lightbox.$lightbox[0].getElementsByClassName("tbp_dynamic_content_options"),g=e.length-1;-1<g;--g)e[g].style.display="";if(!0===b){var f=function(b){null===b.target.closest(".tbp_dc_wrap")&&(document.removeEventListener("mousedown",f,{passive:!0}),"visual"===k.mode&&window.top.document.removeEventListener("mousedown",f,{passive:!0}),d.style.display="");
"visual"===k.mode&&a(document).triggerHandler("mouseup")};document.addEventListener("mousedown",f,{passive:!0});"visual"===k.mode&&window.top.document.addEventListener("mousedown",f,{passive:!0});c(this);d.style.display="block"}else d.style.display=""});d.appendChild(m);b.appendChild(d)}),void 0===g&&z(b,l,n)):void 0===g&&(z(b,l,n),void 0!==h[l]&&m.click())}else void 0===g&&(F(b,l,n),b.classList.remove("tbp_dc_active"),x(l,null,b))},u=function(d){return a(d.closest(".tb_repeatable_field")).index()},
t=function(d){d=d.parentNode.closest(".tb_row_js_wrapper");return null!==d?d.getAttribute("id"):null},E=function(d,c){var b="image"===c?"tb_uploader_input":null!==d.parentNode.closest(".tb_repeatable_field_content")?"tb_lb_option_child":"tb_lb_option",b=d.getElementsByClassName(b)[0],e;void 0!==b&&(e=b.getAttribute("data-input-id"));e||(e=b.getAttribute("id"));return e.trim()},x=function(d,g,b){var e=null,a=t(b);null!==a&&(e=u(b));if(null===g)if((b=JSON.parse(q.value))||(b={}),null!==e){var f=!1;
if(void 0!==b[a]){if(null===d)void 0!==b[a][e]&&(f=!0,delete c[a][e],delete b[a][e]);else if(void 0!==b[a][e]&&void 0!==b[a][e][d]){if(f=!0,delete b[a][e][d],d=Object.keys(b[a][e]).length,0===d||1===d&&void 0!==b[a][e].o)f=!0,delete c[a][e],delete b[a][e]}else return;0===Object.keys(b[a]).length&&(f=!0,delete c[a],delete b[a])}if(!1===f)return}else if(void 0!==b[d])delete b[d];else return;else{null!==e?(void 0===c[a]&&(c[a]={}),void 0===c[a][e]&&(c[a][e]={}),void 0===c[a][e][d]&&(c[a][e][d]={}),b=
void 0!==c[a][e][d].o?c[a][e][d].o:null):(void 0===c[d]&&(c[d]={}),b=void 0!==c[d].o?c[d].o:null);if(Array.isArray(g)){for(var f={},h=g.length-1;-1<h;--h)for(var l=g[h].querySelectorAll("input,textarea,select"),m=l.length-1;-1<m;--m){var p=l[m].value.trim();""===p||l[m].parentNode.parentNode.classList.contains("_tb_hide_binding")||(f[l[m].id]=p)}g=k.Utils.clear(f)}null!==e?(c[a][e][d]=g,null!==b&&(c[a][e][d].o=b)):(c[d]=g,null!==b&&(c[d].o=b));b=c}q.value=JSON.stringify(b);return g},r=function(d,
a){var b=d.closest(".tb_repeatable_field_content");return b=null!==b?b.querySelector('.tb_lb_option_child[data-input-id="'+a+'"]'):ThemifyBuilderCommon.Lightbox.$lightbox[0].querySelector("#"+a)},z=function(d,a,b){var e=null,g=null,f=a;"wp_editor"===b?(b=tinymce.get(a),b||(b=r(d,a),b=tinymce.get(b.id)),b&&(e=b.getContent())):(b=r(d,a),null!==b&&(e=b.value));b=t(d);null!==b&&(g=u(d),f=b);null!==e&&""!==e?(void 0===c[f]&&(c[f]={}),null!==g?(void 0===c[f][g]&&(c[f][g]={}),void 0===c[f][g][a]&&(c[f][g][a]=
{}),c[f][g][a].o=e):c[f].o=e):void 0!==c[f]&&(null!==g?void 0!==c[f][g]&&void 0!==c[f][g][a]&&delete c[f][g][a].o:delete c[f].o);q.value=JSON.stringify(c);return e},F=function(d,a,b){var e=t(d),g="";if(null!==e){if(void 0!==c[e]){var f=u(d);void 0!==c[e][f]&&void 0!==c[e][f][a]&&void 0!==c[e][f][a].o&&(g=c[e][f][a].o)}}else void 0!==c[a]&&void 0!==c[a].o&&(g=c[a].o);"wp_editor"===b?(b=tinymce.get(a),b||(d=r(d,a),b=tinymce.get(d.id)),b&&(b.setContent(String(g)),b.fire("change"))):(d=r(d,a),null!==
d&&(d.value=g,Themify.triggerEvent(d,"change"),"image"!==b&&"SELECT"!==d.nodeName&&Themify.triggerEvent(d,"keyup")))},D=function(a){a=a.getAttribute("data-type");"imageGradient"===a&&(a="image");return a},y=function(a){for(var d=tbpDynamic.excludes,b=tbpDynamic.d_label,c=!1,h="text image textarea wp_editor imageGradient url gallery custom_css".split(" "),f=h.length-1;-1<f;--f)for(var k=a.querySelectorAll('.tb_field[data-type="'+h[f]+'"]'),l=k.length-1;-1<l;--l)if(!k[l].classList.contains("tb_has_dc")){for(var c=
!1,m=d.length-1;-1<m;--m)if(k[l].classList.contains(d[m])){c=!0;break}if(!1===c){k[l].className+=" tb_has_dc";var c=document.createElement("label"),m=document.createElement("input"),p=document.createElement("div");c.className="tpb_dc_toggle switch-wrapper";m.type="checkbox";m.className="toggle_switch";p.className="switch_label";p.setAttribute("data-on",b);p.setAttribute("data-off",b);m.addEventListener("change",function(a){a.stopPropagation();A(this)},{passive:!0});c.appendChild(m);c.appendChild(p);
k[l].insertBefore(c,k[l].firstChild);A(m,!0)}}};a(window).one("load",function(){if("visual"!==k.mode||!0===Themify.is_builder_loaded)setTimeout(w,1500);else Themify.body.one("builderiframeloaded.themify",function(){console.log("aaaa");setTimeout(w,2500)});a(document).on("tb_repeatable_add_new tb_repeatable_duplicate tb_repeatable_delete",function(a){"tb_repeatable_delete"===a.type?x(null,null,a.detail[0]):y(a.detail[0])}).on("tb_editing_module tb_editing_row tb_editing_column tb_editing_subrow",function(a){a=
ThemifyConstructor;var d=ThemifyBuilderCommon.Lightbox.$lightbox[0];q=a.hidden.render({type:"hidden",control:!1,id:v},a);void 0!==a.values[v]?(c=JSON.parse(a.values[v]),q.value=JSON.stringify(c)):c={};d.getElementsByClassName("tb_options_tab_content")[0].appendChild(q);y(d)});Themify.body.on("themify_builder_tabsactive tb_options_expand",function(a,c,b){if(null!==k.activeModel){var d=ThemifyConstructor.clicked;setTimeout(function(){d=ThemifyConstructor.clicked;"animation"!==d&&"visibility"!==d&&("tb_options_expand"===
a.type&&(b=c,c=null),"styling"===d&&null!==c&&-1!==c.indexOf("_h")||y(b))},"setting"===d?0:50)}})})})(jQuery,tb_app);
